# Часть 4. Сети tcp/ip

---

## Какие из приведённых адресов могут быть использованы в качестве IP-адресов сетевого интерфейса для узлов Интернета? Для синтаксически правильных адресов определите их класс: А, В, С, D или Е.</br> Варианты адресов:</br>а) 123.1.223.5;</br>б) 225.0.0.1;</br>в) 194.87.45.255;</br>г) 10.124.251.252;</br>д) 125.24.255.255;</br>е) 17.213.355.205;</br>ж) 179.12.255.255;</br>з) 127.0.23.55;</br>и) 1.0.0.13;</br>к) 124.1.1.1;</br>л) 192.134.216.255;</br>м) 293.236.254.11;</br>н) 13.13.13.13.

Ответ а), д), и), к), н)

**а) 123.1.223.5**  
Допустимый адрес. Относится к классу A (диапазон: 1.0.0.0–126.255.255.255). Первый октет (123) находится в пределах допустимого
для класса A.

**д) 125.24.255.255**  
Допустимый адрес. Также относится к классу A, так как первый октет (125) входит в диапазон 1–126.

**и) 1.0.0.13**  
Допустимый адрес. Класс A. Первый октет (1) находится в допустимом диапазоне.

**к) 124.1.1.1**  
Допустимый адрес. Класс A. Первый октет (124) входит в диапазон 1–126.

**н) 13.13.13.13**  
Допустимый адрес. Класс A. Первый октет (13) находится в допустимом диапазоне.

### Почему другие варианты не подходят
**б) 225.0.0.1**  
Недопустим для обычных сетевых интерфейсов. Относится к классу D (224.0.0.0–239.255.255.255), который зарезервирован для
многоадресной рассылки (multicast).

**в) 194.87.45.255**  
Недопустим. Относится к классу C (192.0.0.0–223.255.255.255), но последний октет (255) является широковещательным адресом
для сети, и его нельзя присвоить узлу.

**г) 10.124.251.252**  
Недопустим для Интернета. Это частный адрес из диапазона класса A (10.0.0.0/8), используемый в локальных сетях.

**е) 17.213.355.205**  
Недопустим. Третий октет (355) выходит за диапазон 0–255, что нарушает правила записи IP-адресов.

**ж) 179.12.255.255**  
Недопустим. Относится к классу B (128.0.0.0–191.255.255.255), но последний октет (255) является широковещательным адресом
для сети.

**з) 127.0.23.55**  
Недопустим для Интернета. Диапазон 127.0.0.0/8 зарезервирован для loopback (локальной отладки).

**л) 192.134.216.255**  
Недопустим. Относится к классу C (192.0.0.0–223.255.255.255), но последний октет (255) является широковещательным адресом
для сети.

**м) 293.236.254.11**  
Недопустим. Первый октет (293) выходит за допустимые пределы для всех классов IPv4 (максимум — 255).

---

## 2. Пусть IP-адрес некоторого узла подсети равен 108.5.18.167, а значение маски для этой подсети — 255.255.255.240. Определите номер подсети. Какое максимальное число сетевых интерфейсов может быть в этой подсети?

### 1. Определение номера подсети
Чтобы найти номер подсети, нужно выполнить **побитовое И** между IP‑адресом и маской.
**Дано:**
- IP‑адрес: `108.5.18.167`
- Маска: `255.255.255.240`

**Шаг 1.** Переведём последний октет в двоичный вид:
- IP (`167`): `10100111`
- Маска (`240`): `11110000`

**Шаг 2.** Выполним побитовое И:
```
  10100111 (167)
& 11110000 (240)
  ────────
  10100000 (160)
```

**Шаг 3.** Собираем полный адрес подсети:
- Первые три октета совпадают (маска `255` → берём как есть).
- Последний октет: `160`.

**Номер подсети:** `108.5.18.160`

### 2. Максимальное число сетевых интерфейсов
**Шаг 1.** Определим количество бит для хостов. 

Маска `255.255.255.240` в двоичном виде: `11111111.11111111.11111111.11110000` → **4 бита** отведены под хосты (нули в маске).

**Шаг 2.** Вычислим количество адресов.

2^4 = 16 адресов.

**Шаг 3.** Учтем ограничения:
- Один адрес — номер подсети (`108.5.18.160`). Это адрес, где все биты хостовой части — нули. Последний октет: 10100000 в двоичном
- Один адрес — широковещательный (`108.5.18.175`). Это адрес, где все биты хостовой части — единицы. Последний октет: 10101111 в двоичном.

**Итого доступных интерфейсов:**

Всего адресов в подсети: 16.

Нельзя использовать:
- 1 адрес (номер подсети),
- 1 адрес (широковещательный).

16 - 2 = 14.

---

## 3. Какое максимальное количество подсетей теоретически можно организовать, если в вашем распоряжении имеется сеть класса С? Какое значение должна при этом иметь маска? При ответе не принимайте во внимание двухточечные соединения.

Ответ:
- **Максимальное число подсетей:** 64.
- **Требуемая маска:** `255.255.255.252` (или `/30` в CIDR‑нотации).

**Что такое сеть класса C?**
- Диапазон: от `192.0.0.0` до `223.255.255.255`.
- Стандартная маска: `255.255.255.0` (`/24`), то есть:
    - **24 бита** — сетевая часть (фиксирована);
    - **8 бит** — хостовая часть (можно «забирать» под подсеть).

**Как делить на подсети?**
- Чтобы создать подсети, «забираем» биты из хостовой части и отдаём их под номер подсети.
- В классе C у нас **8 бит** для хостов. Чтобы в каждой подсети было хотя бы **2 адреса для устройств**, нужно оставить
минимум **2 бита на хосты** (тогда 2^2 - 2 = 2 полезных адреса).
- Значит, под номер подсети можно отдать **6 бит** (8 - 2 = 6).

**Почему максимум 64 подсети?**
- Если взять **6 бит** под номер подсети:
    - Число подсетей: 2^6 = 64.
    - Остаётся **2 бита** на хосты: 2^2 - 2 = 2 адреса на подсеть (минус номер сети и broadcast).
- Взять 7 бит под подсети нельзя: останется 1 бит на хосты → 2^1 - 2 = 0 адресов (бесполезно).


**Какая маска?**
- Было: `/24` (24 бита сети).
- Добавляем 6 бит под подсети: 24 + 6 = 30 бит сети.
- Маска: `255.255.255.252` (`/30`).
- Проверка:
    - Последний октет маски (`252`) в двоичном виде: `11111100` → 6 единиц (добавили 6 бит к сети) и 2 нуля (осталось на хосты).

**Почему не `/26`?**
- При `/26` мы «забираем» только 2 бита из хостовой части (26 - 24 = 2).
- Тогда:
    - Подсетей: 2^2 = 4 (намного меньше 64).
    - Хостов на подсеть: 2^6 - 2 = 62 (много, но число подсетей мало).
- `/30` даёт максимум подсетей при минимуме хостов.

---

## 4. Пусть вам ничего не известно об узлах, кроме их DNS-имен:</br> w1.piter.ru, www.msk.ru и www.piter.ru, echo.msk.ru.</br> Что вы можете сказать о том, насколько близко территориально находятся они относительно друг друга?</br> Варианты ответов:</br> а) узел www.msk.ru территориально ближе к echo.msk.ru, чем к w1.piter.ru;</br> б) узел www.msk.ru расположен ближе к www.piter.ru, чем к echo.msk.ru;</br> в) узел w1.piter.ru территориально ближе к www.piter.ru, чем к www.msk.ru;</br> г) ничего определённого.

Ответ г)

DNS‑имя (например, `www.msk.ru` или `w1.piter.ru`) **не содержит информации о физическом местоположении узла**.

- `msk.ru` — намекает на Москву (`msk` = Москва).
- `piter.ru` — намекает на Санкт‑Петербург (`piter` = Питер).

Но это **только семантика** (смысловая подсказка для человека), а не технический параметр.

**Серверы могут быть размещены где угодно**
- Домен `msk.ru` может физически находиться:
    - в Москве,
    - в другом городе России,
    - даже за границей (например, на хостинге в Германии).
- То же самое с `piter.ru`.

**DNS не привязан к географии**
- DNS‑имя — это просто «удобное имя» для IP‑адреса.
- IP‑адрес тоже **не гарантирует** местоположение (из‑за VPN, прокси, CDN, облачных сервисов).

**Примеры обмана ожиданий**
- Сайт `example.msk.ru` может работать на сервере в Сибири.
- Два сайта с `piter.ru` могут находиться в разных странах, если их хостят международные провайдеры.

---

## 5. Пусть вам ничего не известно о структуре сети, но в вашем распоряжении имеется следующая таблица соответствия IP-адресов и DNS-имен нескольких узлов сети:

| IP-адрес узла | 123.1.0.01 | 123.1.0.02 | 123.1.0.03 | 123.1.0.04 | ? | ? |
| --- | --- | --- | --- | --- | --- | --- |
| DNS-имя узла | w1.mgu.ru | w2.mgu.ru | w3.mgu.ru | w4.mgu.ru | w5.mgu.ru | w6.mgu.ru |

### Что вы можете сказать об IP-адресах узлов, имеющих DNS-имена w5.mgu.ru и w6.mgu.ru?

Между DNS-именами и IP-адресами в общем случае нет связи, поэтому ничего определенного сказать нельзя.

**Что видно из таблицы**
- Все известные узлы (`w1`–`w4`) имеют IP‑адреса в формате `123.1.0.XX`, где `XX`—порядковый номер (`01`, `02`, `03`, `04`).
- Все DNS‑имена принадлежат домену `mgu.ru` и следуют шаблону `w<номер>.mgu.ru`.

**Логичное предположение**
- Если нумерация IP‑адресов последовательная, то:
    - `w5.mgu.ru` → скорее всего, `123.1.0.05`;
    - `w6.mgu.ru` → скорее всего, `123.1.0.06`.
- Это соответствует шаблону: `123.1.0.<номер_узла>`.

**Почему нельзя утверждать наверняка**
- В таблице есть **пропуски** (знаки `?`), значит:
    - Возможно, адреса назначаются не строго по порядку (например, `w5` может иметь `123.1.0.10`).
    - Могут быть зарезервированные адреса или иная логика распределения.
- Нет информации о **маске подсети** или правилах адресации в этой сети.

**Что точно известно**
- Узлы `w5` и `w6` принадлежат той же сети (`123.1.0.0/24`), что и `w1`–`w4`, так как:
    - Первые три октета (`123.1.0`) совпадают.
    - DNS‑имена в одном домене (`mgu.ru`), что обычно указывает на единую инфраструктуру.

---